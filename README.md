Drupal-Fax-Webform-Script
=========================

Send Fax using Druapl webforms
Edgefax.com

This script is used to convert emails generated by Drupal webforms 3.x and submits them to Hylafax using the number in the subject line as the fax destination number. 
This script assumes you have a working Hylafax server & a drupal 7 site with  Webforms. This has been tested on Ubuntu 14.04 but should work with any UNIX-like system. with minor adjustments.


Requirements:
1) Drupal 7 with Webforms 3.x and Webform Phone Number module
2) Linux system with working sendmail (test to make sure sendmail works before using this script)
3) python 2
4) A webform created with drupal that passes the Phone Number field as a subject line (you can use webform tokens to do this)
5) Hylafax (script was tested on 6.0.6)

Download both sendmailpy & sendmailsh to /etc/alternatives

Create a symlink for sendmail

ln -s /etc/alternatives/sendmailsh /usr/sbin/sendmail

vi /etc/alternatives/sendmailsh

change the email address listed in the mail_flag = "fax@domain.com" line to the same email address used in the To: field under the Webform settings.

make scripts executable

chmod +x sendmailpy
chmod +x sendmailsh

When a webform is submitted to the email address defined in mail_flag the fax number will be extracted from subject  line and submitted to Hylafax. 
This will also convert PDF and Tiff attachments as well. When a To: email address is used for the webform other than the one specified in mail_flag
it will be handled by regular sendmail and just send the email as intended.


You can see this script in action @ www.edgefax.com
